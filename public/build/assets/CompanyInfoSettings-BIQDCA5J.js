import{E as A,F as L,G as R,e as W,v as P,f as x,H as T,k as q,g as I,h as F,a0 as X,j as J,r as u,o as h,m as U,w as i,b as l,t as p,l as s,q as Y,a as e,p as N,J as E,K as D,a5 as se,c as G,n as oe,N as ne,I as le}from"./main-BIpkCKxL.js";const ie={class:"flex justify-between w-full"},de={class:"px-6 pt-6"},re={class:"font-medium text-lg text-left"},ue={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},me={class:"p-4 sm:p-6 space-y-4"},ce={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},pe={__name:"DeleteCompanyModal",setup(O){const d=A(),y=L(),B=R(),_=W(),{t:M}=P.useI18n();let m=x(!1);const t=T({id:d.selectedCompany.id,name:null}),$=q(()=>y.active&&y.componentName==="DeleteCompanyModal"),f={formData:{name:{required:I.withMessage(M("validation.required"),F),sameAsName:I.withMessage(M("validation.company_name_not_same"),X(d.selectedCompany.name))}}},r=J(f,{formData:t},{$scope:!1});async function C(){if(r.value.$touch(),r.value.$invalid)return!0;const b=d.companies[0];m.value=!0;try{const v=await d.deleteCompany(t);console.log(v.data.success),v.data.success&&(c(),await d.setSelectedCompany(b),_.push("/admin/dashboard"),await B.setIsAppLoaded(!1),await B.bootstrap()),m.value=!1}catch{m.value=!1}}function S(){t.id=null,t.name="",r.value.$reset()}function c(){y.closeModal(),setTimeout(()=>{S(),r.value.$reset()},300)}return(b,v)=>{const j=u("BaseInput"),z=u("BaseInputGroup"),k=u("BaseButton"),o=u("BaseIcon"),a=u("BaseModal");return h(),U(a,{show:$.value,onClose:c},{default:i(()=>[l("div",ie,[l("div",de,[l("h6",re,p(s(y).title),1),l("p",ue,p(b.$t("settings.company_info.delete_company_modal_desc",{company:s(d).selectedCompany.name})),1)])]),l("form",{action:"",onSubmit:Y(C,["prevent"])},[l("div",me,[e(z,{label:b.$t("settings.company_info.delete_company_modal_label",{company:s(d).selectedCompany.name}),error:s(r).formData.name.$error&&s(r).formData.name.$errors[0].$message,required:""},{default:i(()=>[e(j,{modelValue:t.name,"onUpdate:modelValue":v[0]||(v[0]=V=>t.name=V),invalid:s(r).formData.name.$error,onInput:v[1]||(v[1]=V=>s(r).formData.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),l("div",ce,[e(k,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:c},{default:i(()=>[N(p(b.$t("general.cancel")),1)]),_:1}),e(k,{loading:s(m),disabled:s(m),variant:"danger",type:"submit"},{left:i(V=>[s(m)?D("",!0):(h(),U(o,{key:0,name:"TrashIcon",class:E(V.class)},null,8,["class"]))]),default:i(()=>[N(" "+p(b.$t("general.delete")),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["show"])}}},_e={class:"flex justify-between w-full"},fe={class:"px-6 pt-6"},ye={class:"font-medium text-lg text-left"},ge={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},ve={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},be={__name:"UpdatePermissionModal",setup(O){const d=A(),y=L();R(),W();const{t:B}=P.useI18n();let _=x(!1);const M=T({id:d.selectedCompany.id,name:null}),m=q(()=>y.active&&y.componentName==="UpdatePermissionModal"),t={formData:{name:{required:I.withMessage(B("validation.required"),F),sameAsName:I.withMessage(B("validation.company_name_not_same"),X(d.selectedCompany.name))}}};J(t,{formData:M},{$scope:!1});async function $(){_.value=!0;try{const r=await d.updatePermissions({id:d.selectedCompany.id});console.log(r.data.success),r.data.success&&f(),_.value=!1}catch{_.value=!1}}function f(){y.closeModal()}return(r,C)=>{const S=u("BaseButton"),c=u("BaseIcon"),b=u("BaseModal");return h(),U(b,{show:m.value,onClose:f},{default:i(()=>[l("div",_e,[l("div",fe,[l("h6",ye,p(s(y).title),1),l("p",ge,p(r.$t("settings.company_info.update_permissions_modal_desc",{company:s(d).selectedCompany.name})),1)])]),l("div",ve,[e(S,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:f},{default:i(()=>[N(p(r.$t("general.cancel")),1)]),_:1}),e(S,{loading:s(_),disabled:s(_),onClick:$,variant:"primary",type:"button"},{left:i(v=>[s(_)?D("",!0):(h(),U(c,{key:0,name:"RefreshIcon",class:E(v.class)},null,8,["class"]))]),default:i(()=>[N(" "+p(r.$t("general.update")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}},$e={class:"space-y-6"},Be={key:0,class:"py-5"},he={class:"text-lg leading-6 font-medium text-gray-900"},Ce={class:"mt-2 max-w-xl text-sm text-gray-500"},Ve={class:"mt-5"},we={key:1,class:"py-5"},xe={class:"text-lg leading-6 font-medium text-gray-900"},Ie={class:"mt-2 max-w-xl text-sm text-gray-500"},Me={class:"mt-5"},De={__name:"CompanyInfoSettings",setup(O){const d=A(),y=R(),B=L(),{t:_}=P.useI18n(),M=se("utils");let m=x(!1);const t=T({name:null,logo:null,tax_id:null,vat_id:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}});M.mergeSettings(t,{...d.selectedCompany});let $=x([]),f=x(null),r=x(null);const C=x(!1);t.logo&&$.value.push({image:t.logo});const S=q(()=>({name:{required:I.withMessage(_("validation.required"),F),minLength:I.withMessage(_("validation.name_min_length"),le(3))},address:{country_id:{required:I.withMessage(_("validation.required"),F)}}})),c=J(S,q(()=>t));y.fetchCountries();function b(o,a,V,g){r.value=g.name,f.value=a}function v(){f.value=null,C.value=!0}async function j(){if(c.value.$touch(),c.value.$invalid)return!0;if(m.value=!0,(await d.updateCompany(t)).data.data){if(f.value||C.value){let a=new FormData;f.value&&a.append("company_logo",JSON.stringify({name:r.value,data:f.value})),a.append("is_company_logo_removed",C.value),console.log(JSON.stringify({name:r.value,data:f.value})),await d.updateCompanyLogo(a),f.value=null,C.value=!1}m.value=!1}m.value=!1}function z(o){B.openModal({title:_("settings.company_info.are_you_absolutely_sure"),componentName:"UpdatePermissionModal",size:"sm"})}function k(o){B.openModal({title:_("settings.company_info.are_you_absolutely_sure"),componentName:"DeleteCompanyModal",size:"sm"})}return(o,a)=>{const V=u("BaseFileUploader"),g=u("BaseInputGroup"),H=u("BaseInputGrid"),w=u("BaseInput"),Z=u("BaseMultiselect"),K=u("BaseTextarea"),ee=u("BaseIcon"),te=u("BaseButton"),Q=u("BaseDivider"),ae=u("BaseSettingCard");return h(),G(ne,null,[l("form",{onSubmit:Y(j,["prevent"])},[e(ae,{title:o.$t("settings.company_info.company_info"),description:o.$t("settings.company_info.section_description")},{default:i(()=>[e(H,{class:"mt-5"},{default:i(()=>[e(g,{label:o.$t("settings.company_info.company_logo")},{default:i(()=>[e(V,{modelValue:s($),"onUpdate:modelValue":a[0]||(a[0]=n=>oe($)?$.value=n:$=n),base64:"",onChange:b,onRemove:v},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(H,{class:"mt-5"},{default:i(()=>[e(g,{label:o.$t("settings.company_info.company_name"),error:s(c).name.$error&&s(c).name.$errors[0].$message,required:""},{default:i(()=>[e(w,{modelValue:t.name,"onUpdate:modelValue":a[1]||(a[1]=n=>t.name=n),invalid:s(c).name.$error,onBlur:a[2]||(a[2]=n=>s(c).name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),e(g,{label:o.$t("settings.company_info.phone")},{default:i(()=>[e(w,{modelValue:t.address.phone,"onUpdate:modelValue":a[3]||(a[3]=n=>t.address.phone=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:o.$t("settings.company_info.country"),error:s(c).address.country_id.$error&&s(c).address.country_id.$errors[0].$message,required:""},{default:i(()=>[e(Z,{modelValue:t.address.country_id,"onUpdate:modelValue":a[4]||(a[4]=n=>t.address.country_id=n),label:"name",invalid:s(c).address.country_id.$error,options:s(y).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),e(g,{label:o.$t("settings.company_info.state")},{default:i(()=>[e(w,{modelValue:t.address.state,"onUpdate:modelValue":a[5]||(a[5]=n=>t.address.state=n),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:o.$t("settings.company_info.city")},{default:i(()=>[e(w,{modelValue:t.address.city,"onUpdate:modelValue":a[6]||(a[6]=n=>t.address.city=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:o.$t("settings.company_info.zip")},{default:i(()=>[e(w,{modelValue:t.address.zip,"onUpdate:modelValue":a[7]||(a[7]=n=>t.address.zip=n)},null,8,["modelValue"])]),_:1},8,["label"]),l("div",null,[e(g,{label:o.$t("settings.company_info.address")},{default:i(()=>[e(K,{modelValue:t.address.address_street_1,"onUpdate:modelValue":a[8]||(a[8]=n=>t.address.address_street_1=n),rows:"2"},null,8,["modelValue"])]),_:1},8,["label"]),e(K,{modelValue:t.address.address_street_2,"onUpdate:modelValue":a[9]||(a[9]=n=>t.address.address_street_2=n),rows:"2",row:2,class:"mt-2"},null,8,["modelValue"])]),l("div",$e,[e(g,{label:o.$t("settings.company_info.tax_id")},{default:i(()=>[e(w,{modelValue:t.tax_id,"onUpdate:modelValue":a[10]||(a[10]=n=>t.tax_id=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:o.$t("settings.company_info.vat_id")},{default:i(()=>[e(w,{modelValue:t.vat_id,"onUpdate:modelValue":a[11]||(a[11]=n=>t.vat_id=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"])])]),_:1}),e(te,{loading:s(m),disabled:s(m),type:"submit",class:"mt-6"},{left:i(n=>[s(m)?D("",!0):(h(),U(ee,{key:0,class:E(n.class),name:"SaveIcon"},null,8,["class"]))]),default:i(()=>[N(" "+p(o.$t("settings.company_info.save")),1)]),_:1},8,["loading","disabled"]),s(d).companies.length!==1?(h(),G("div",Be,[e(Q,{class:"my-4"}),l("h3",he,p(o.$t("settings.company_info.update_permissions")),1),l("div",Ce,[l("p",null,p(o.$t("settings.company_info.update_permissions_description")),1)]),l("div",Ve,[l("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm",onClick:z},p(o.$t("general.confirm_update")),1)])])):D("",!0),s(d).companies.length!==1?(h(),G("div",we,[e(Q,{class:"my-4"}),l("h3",xe,p(o.$t("settings.company_info.delete_company")),1),l("div",Ie,[l("p",null,p(o.$t("settings.company_info.delete_company_description")),1)]),l("div",Me,[l("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",onClick:k},p(o.$t("general.delete")),1)])])):D("",!0)]),_:1},8,["title","description"])],32),e(pe),e(be)],64)}}};export{De as default};
