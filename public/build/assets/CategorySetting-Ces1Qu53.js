import{a7 as I,u as T,v as x,L as M,M as z,F as N,a5 as P,r as d,o as g,m as y,w as e,l as p,a as n,Q as v,p as w,t as B,K as k,f as j,k as F,c as L,J as V,b as S,N as A}from"./main-rWP4cpcr.js";import{u as E}from"./category-CoSPM0Ov.js";import{_ as H}from"./CategoryModal-660ZMBr9.js";const O={__name:"CategoryIndexDropdown",props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(_){const r=_,h=I();T();const{t}=x.useI18n(),u=E(),b=M(),f=z(),D=N();P("utils");function C(s){u.fetchCategory(s.id),D.openModal({title:t("settings.category.edit_category"),componentName:"CategoryModal",refreshData:r.loadData,size:"sm",data:{type:s.type}})}function l(s){h.openDialog({title:t("general.are_you_sure"),message:t("settings.category.confirm_delete"),yesLabel:t("general.ok"),noLabel:t("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async()=>{if((await u.deleteCategory(s)).data.success)return r.loadData&&r.loadData(),!0;r.loadData&&r.loadData()})}return(s,a)=>{const c=d("BaseIcon"),i=d("BaseButton"),m=d("BaseDropdownItem"),o=d("BaseDropdown");return g(),y(o,null,{activator:e(()=>[p(b).name==="categorys.view"?(g(),y(i,{key:0,variant:"primary"},{default:e(()=>[n(c,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(g(),y(c,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:e(()=>[p(f).hasAbilities(p(v).EDIT_EXPENSE)?(g(),y(m,{key:0,onClick:a[0]||(a[0]=$=>C(_.row))},{default:e(()=>[n(c,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),w(" "+B(s.$t("general.edit")),1)]),_:1})):k("",!0),p(f).hasAbilities(p(v).DELETE_EXPENSE)?(g(),y(m,{key:1,onClick:a[1]||(a[1]=$=>l(_.row.id))},{default:e(()=>[n(c,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),w(" "+B(s.$t("general.delete")),1)]),_:1})):k("",!0)]),_:1})}}},X={class:"w-64"},J={class:"truncate"},U={__name:"CategorySetting",setup(_){const r=E();I();const h=N(),{t}=x.useI18n(),u=j(null),b=F(()=>[{key:"complete_name",label:t("settings.category.category_name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"typeName",label:t("settings.category.category_type"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"description",label:t("settings.category.category_description"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);async function f({page:l,filter:s,sort:a}){var m;let c={orderByField:a.fieldName||"created_at",orderBy:a.order||"desc",page:l},i=await r.fetchCategories(c);return(m=i.data.data)==null||m.map(o=>o.typeName=r.categoryTypes[o.type]),{data:i.data.data,pagination:{totalPages:i.data.meta.last_page,currentPage:l,totalCount:i.data.meta.total,limit:5}}}function D(){console.log({type:"invoice"}),h.openModal({title:t("settings.category.add_category"),componentName:"CategoryModal",size:"sm",refreshData:C})}async function C(){u.value&&u.value.refresh()}return(l,s)=>{const a=d("BaseIcon"),c=d("BaseButton"),i=d("BaseTable"),m=d("BaseSettingCard");return g(),L(A,null,[n(H),n(m,{title:l.$t("settings.category.title"),description:l.$t("settings.category.description")},{action:e(()=>[n(c,{variant:"primary-outline",type:"button",onClick:D},{left:e(o=>[n(a,{class:V(o.class),name:"PlusIcon"},null,8,["class"])]),default:e(()=>[w(" "+B(l.$t("settings.category.add_new_category")),1)]),_:1})]),default:e(()=>[n(i,{ref_key:"table",ref:u,"sort-by":"complete_name","sort-order":"asc",data:f,columns:b.value,class:"mt-16"},{"cell-description":e(({row:o})=>[S("div",X,[S("p",J,B(o.data.description),1)])]),"cell-actions":e(({row:o})=>[n(O,{row:o.data,table:u.value,"load-data":C},null,8,["row","table"])]),_:1},8,["columns"])]),_:1},8,["title","description"])],64)}}};export{U as default};
