import{as as O,F as R,u as z,a6 as j,M as F,v as P,L as U,e as H,a4 as W,r as p,o as l,m as c,w as a,l as s,a as r,Q as y,ab as q,p as d,t as m,ac as K,K as v}from"./main-CO79g86p.js";const G={__name:"InvoiceIndexDropdown",props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:()=>{}}},setup(o){const f=o,k=O(),E=R(),S=z(),C=j(),g=F(),{t:i}=P.useI18n(),w=U(),D=H(),_=W("utils");function x(e){return(e.status=="SENT"||e.status=="VIEWED")&&g.hasAbilities(y.SEND_INVOICE)}function $(e){return e.status=="DRAFT"&&w.name!=="invoices.view"&&g.hasAbilities(y.SEND_INVOICE)}async function A(e){C.openDialog({title:i("general.are_you_sure"),message:i("invoices.confirm_delete"),yesLabel:i("general.ok"),noLabel:i("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(t=>{e=e,t&&k.deleteInvoice({ids:[e]}).then(n=>{n.data.success&&(D.push("/admin/invoices"),f.table&&f.table.refresh(),k.$patch(I=>{I.selectedInvoices=[],I.selectAllField=!1}))})})}async function B(e){C.openDialog({title:i("general.are_you_sure"),message:i("invoices.confirm_clone"),yesLabel:i("general.ok"),noLabel:i("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(t=>{t&&k.cloneInvoice(e).then(n=>{D.push(`/admin/invoices/${n.data.data.id}/edit`)})})}async function T(e){C.openDialog({title:i("general.are_you_sure"),message:i("invoices.invoice_mark_as_sent"),yesLabel:i("general.ok"),noLabel:i("general.cancel"),variant:"primary",hideNoButton:!1,size:"lg"}).then(t=>{const n={id:e,status:"SENT"};t&&k.markAsSent(n).then(I=>{f.table&&f.table.refresh()})})}async function V(e){E.openModal({title:i("estimates.add_calendar"),componentName:"CalendarModal",data:{type:"invoice",id:e.id,customerId:e.customer_id,title:e.invoice_number}})}async function N(e){E.openModal({title:i("invoices.send_invoice"),componentName:"SendInvoiceModal",id:e.id,data:e,variant:"sm"})}function L(){let e=`${window.location.origin}/invoices/pdf/${f.row.unique_hash}`;_.copyTextToClipboard(e),S.showNotification({type:"success",message:i("general.copied_pdf_url_clipboard")})}return(e,t)=>{const n=p("BaseIcon"),I=p("BaseButton"),u=p("BaseDropdownItem"),b=p("router-link"),M=p("BaseDropdown");return l(),c(M,null,{activator:a(()=>[s(w).name==="invoices.view"?(l(),c(I,{key:0,variant:"primary"},{default:a(()=>[r(n,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(l(),c(n,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:a(()=>[s(g).hasAbilities(s(y).EDIT_INVOICE)?(l(),c(b,{key:0,to:`/admin/invoices/${o.row.id}/edit`},{default:a(()=>[q(r(u,null,{default:a(()=>[r(n,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("general.edit")),1)]),_:1},512),[[K,o.row.allow_edit]])]),_:1},8,["to"])):v("",!0),s(w).name==="invoices.view"?(l(),c(u,{key:1,onClick:L},{default:a(()=>[r(n,{name:"LinkIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("general.copy_pdf_url")),1)]),_:1})):v("",!0),s(w).name!=="invoices.view"&&s(g).hasAbilities(s(y).VIEW_INVOICE)?(l(),c(b,{key:2,to:`/admin/invoices/${o.row.id}/view`},{default:a(()=>[r(u,null,{default:a(()=>[r(n,{name:"EyeIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("general.view")),1)]),_:1})]),_:1},8,["to"])):v("",!0),s(g).hasAbilities(s(y).CREATE_CALENDAR)?(l(),c(u,{key:3,onClick:t[0]||(t[0]=h=>V(o.row))},{default:a(()=>[r(n,{name:"CalendarIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("estimates.add_calendar")),1)]),_:1})):v("",!0),$(o.row)?(l(),c(u,{key:4,onClick:t[1]||(t[1]=h=>N(o.row))},{default:a(()=>[r(n,{name:"PaperAirplaneIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("invoices.send_invoice")),1)]),_:1})):v("",!0),x(o.row)?(l(),c(u,{key:5,onClick:t[2]||(t[2]=h=>N(o.row))},{default:a(()=>[r(n,{name:"PaperAirplaneIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("invoices.resend_invoice")),1)]),_:1})):v("",!0),r(b,{to:`/admin/payments/${o.row.id}/create`},{default:a(()=>[o.row.status=="SENT"&&s(w).name!=="invoices.view"?(l(),c(u,{key:0},{default:a(()=>[r(n,{name:"CreditCardIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("invoices.record_payment")),1)]),_:1})):v("",!0)]),_:1},8,["to"]),$(o.row)?(l(),c(u,{key:6,onClick:t[3]||(t[3]=h=>T(o.row.id))},{default:a(()=>[r(n,{name:"CheckCircleIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("invoices.mark_as_sent")),1)]),_:1})):v("",!0),s(g).hasAbilities(s(y).CREATE_INVOICE)?(l(),c(u,{key:7,onClick:t[4]||(t[4]=h=>B(o.row))},{default:a(()=>[r(n,{name:"DocumentTextIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("invoices.clone_invoice")),1)]),_:1})):v("",!0),s(g).hasAbilities(s(y).DELETE_INVOICE)?(l(),c(u,{key:8,onClick:t[5]||(t[5]=h=>A(o.row.id))},{default:a(()=>[r(n,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),d(" "+m(e.$t("general.delete")),1)]),_:1})):v("",!0)]),_:1})}}};export{G as _};
