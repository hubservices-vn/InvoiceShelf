import{a4 as y,s,a1 as r,u as n}from"./main-rWP4cpcr.js";const p=(d=!1)=>{const u=d?window.pinia.defineStore:y,{global:c}=window.i18n;return u({id:"category",state:()=>({categories:[],currentCategory:{id:null,name:"",parent_id:null,type:"",image_url:"",description:""},editCategory:null,categoryTypes:{item:"Item",invoice:"Invoice",expense:"Expense",estimate:"Estimate",customer:"Customer",payment:"Payment",recurringInvoice:"Recurring Invoice"}}),getters:{isEdit:t=>!!t.currentCategory.id,categoryItems:t=>Object.keys(t.categoryTypes).reduce((a,i)=>[...a,{id:i,label:t.categoryTypes[i]}],[])},actions:{fetchCategories(t){return new Promise((a,i)=>{s.get("/api/v1/categories",{params:t}).then(e=>{this.categories=e.data.data,a(e)}).catch(e=>{r(e),i(e)})})},fetchCategory(t){return new Promise((a,i)=>{s.get(`/api/v1/categories/${t}`).then(e=>{this.currentCategory=e.data.data,a(e)}).catch(e=>{r(e),i(e)})})},addCategory(t){return new Promise((a,i)=>{s.post("/api/v1/categories",t).then(e=>{this.categories.push(e.data.data),n().showNotification({type:"success",message:c.t("settings.category.created_message")}),a(e)}).catch(e=>{r(e),i(e)})})},updateCategoryImage(t,a){return console.log(a),new Promise((i,e)=>{s.post(`/api/v1/categories/${t}/upload-image`,a).then(o=>{i(o)}).catch(o=>{r(o),e(o)})})},updateCategory(t){return new Promise((a,i)=>{s.put(`/api/v1/categories/${t.id}`,t).then(e=>{if(e.data){let o=this.categories.findIndex(m=>m.id===e.data.data.id);this.categories[o]=t.categories,n().showNotification({type:"success",message:c.t("settings.category.updated_message")})}a(e)}).catch(e=>{r(e),i(e)})})},deleteCategory(t){return new Promise(a=>{s.delete(`/api/v1/categories/${t}`).then(i=>{let e=this.categories.findIndex(g=>g.id===t);this.categories.splice(e,1),n().showNotification({type:"success",message:c.t("settings.category.deleted_message")}),a(i)}).catch(i=>{r(i),console.error(i)})})}}})()};export{p as u};
