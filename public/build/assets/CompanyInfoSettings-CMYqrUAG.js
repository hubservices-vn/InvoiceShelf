import{E as A,F as L,G as R,e as W,v as P,f as x,H as T,k as q,g as I,h as F,$ as X,j as E,r,o as h,m as U,w as i,b as l,t as p,l as s,q as Y,a as e,p as k,J,K as D,a4 as se,c as G,n as oe,N as ne,I as le}from"./main-BUEnsROI.js";const ie={class:"flex justify-between w-full"},de={class:"px-6 pt-6"},re={class:"font-medium text-lg text-left"},ue={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},me={class:"p-4 sm:p-6 space-y-4"},ce={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},pe={__name:"DeleteCompanyModal",setup(H){const d=A(),f=L(),B=R(),_=W(),{t:M}=P.useI18n();let m=x(!1);const t=T({id:d.selectedCompany.id,name:null}),b=q(()=>f.active&&f.componentName==="DeleteCompanyModal"),y={formData:{name:{required:I.withMessage(M("validation.required"),F),sameAsName:I.withMessage(M("validation.company_name_not_same"),X(d.selectedCompany.name))}}},u=E(y,{formData:t},{$scope:!1});async function C(){if(u.value.$touch(),u.value.$invalid)return!0;const v=d.companies[0];m.value=!0;try{(await d.deleteCompany(t)).data.success&&(c(),await d.setSelectedCompany(v),_.push("/admin/dashboard"),await B.setIsAppLoaded(!1),await B.bootstrap()),m.value=!1}catch{m.value=!1}}function S(){t.id=null,t.name="",u.value.$reset()}function c(){f.closeModal(),setTimeout(()=>{S(),u.value.$reset()},300)}return(v,$)=>{const j=r("BaseInput"),z=r("BaseInputGroup"),N=r("BaseButton"),o=r("BaseIcon"),a=r("BaseModal");return h(),U(a,{show:b.value,onClose:c},{default:i(()=>[l("div",ie,[l("div",de,[l("h6",re,p(s(f).title),1),l("p",ue,p(v.$t("settings.company_info.delete_company_modal_desc",{company:s(d).selectedCompany.name})),1)])]),l("form",{action:"",onSubmit:Y(C,["prevent"])},[l("div",me,[e(z,{label:v.$t("settings.company_info.delete_company_modal_label",{company:s(d).selectedCompany.name}),error:s(u).formData.name.$error&&s(u).formData.name.$errors[0].$message,required:""},{default:i(()=>[e(j,{modelValue:t.name,"onUpdate:modelValue":$[0]||($[0]=V=>t.name=V),invalid:s(u).formData.name.$error,onInput:$[1]||($[1]=V=>s(u).formData.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),l("div",ce,[e(N,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:c},{default:i(()=>[k(p(v.$t("general.cancel")),1)]),_:1}),e(N,{loading:s(m),disabled:s(m),variant:"danger",type:"submit"},{left:i(V=>[s(m)?D("",!0):(h(),U(o,{key:0,name:"TrashIcon",class:J(V.class)},null,8,["class"]))]),default:i(()=>[k(" "+p(v.$t("general.delete")),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["show"])}}},_e={class:"flex justify-between w-full"},fe={class:"px-6 pt-6"},ye={class:"font-medium text-lg text-left"},ge={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},ve={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},be={__name:"UpdatePermissionModal",setup(H){const d=A(),f=L();R(),W();const{t:B}=P.useI18n();let _=x(!1);const M=T({id:d.selectedCompany.id,name:null}),m=q(()=>f.active&&f.componentName==="UpdatePermissionModal"),t={formData:{name:{required:I.withMessage(B("validation.required"),F),sameAsName:I.withMessage(B("validation.company_name_not_same"),X(d.selectedCompany.name))}}};E(t,{formData:M},{$scope:!1});async function b(){_.value=!0;try{(await d.updatePermissions({id:d.selectedCompany.id})).data.success&&y(),_.value=!1}catch{_.value=!1}}function y(){f.closeModal()}return(u,C)=>{const S=r("BaseButton"),c=r("BaseIcon"),v=r("BaseModal");return h(),U(v,{show:m.value,onClose:y},{default:i(()=>[l("div",_e,[l("div",fe,[l("h6",ye,p(s(f).title),1),l("p",ge,p(u.$t("settings.company_info.update_permissions_modal_desc",{company:s(d).selectedCompany.name})),1)])]),l("div",ve,[e(S,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:y},{default:i(()=>[k(p(u.$t("general.cancel")),1)]),_:1}),e(S,{loading:s(_),disabled:s(_),onClick:b,variant:"primary",type:"button"},{left:i($=>[s(_)?D("",!0):(h(),U(c,{key:0,name:"RefreshIcon",class:J($.class)},null,8,["class"]))]),default:i(()=>[k(" "+p(u.$t("general.update")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}},$e={class:"space-y-6"},Be={key:0,class:"py-5"},he={class:"text-lg leading-6 font-medium text-gray-900"},Ce={class:"mt-2 max-w-xl text-sm text-gray-500"},Ve={class:"mt-5"},we={key:1,class:"py-5"},xe={class:"text-lg leading-6 font-medium text-gray-900"},Ie={class:"mt-2 max-w-xl text-sm text-gray-500"},Me={class:"mt-5"},De={__name:"CompanyInfoSettings",setup(H){const d=A(),f=R(),B=L(),{t:_}=P.useI18n(),M=se("utils");let m=x(!1);const t=T({name:null,logo:null,tax_id:null,vat_id:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}});M.mergeSettings(t,{...d.selectedCompany});let b=x([]),y=x(null),u=x(null);const C=x(!1);t.logo&&b.value.push({image:t.logo});const S=q(()=>({name:{required:I.withMessage(_("validation.required"),F),minLength:I.withMessage(_("validation.name_min_length"),le(3))},address:{country_id:{required:I.withMessage(_("validation.required"),F)}}})),c=E(S,q(()=>t));f.fetchCountries();function v(o,a,V,g){u.value=g.name,y.value=a}function $(){y.value=null,C.value=!0}async function j(){if(c.value.$touch(),c.value.$invalid)return!0;if(m.value=!0,(await d.updateCompany(t)).data.data){if(y.value||C.value){let a=new FormData;y.value&&a.append("company_logo",JSON.stringify({name:u.value,data:y.value})),a.append("is_company_logo_removed",C.value),await d.updateCompanyLogo(a),y.value=null,C.value=!1}m.value=!1}m.value=!1}function z(o){B.openModal({title:_("settings.company_info.are_you_absolutely_sure"),componentName:"UpdatePermissionModal",size:"sm"})}function N(o){B.openModal({title:_("settings.company_info.are_you_absolutely_sure"),componentName:"DeleteCompanyModal",size:"sm"})}return(o,a)=>{const V=r("BaseFileUploader"),g=r("BaseInputGroup"),K=r("BaseInputGrid"),w=r("BaseInput"),Z=r("BaseMultiselect"),O=r("BaseTextarea"),ee=r("BaseIcon"),te=r("BaseButton"),Q=r("BaseDivider"),ae=r("BaseSettingCard");return h(),G(ne,null,[l("form",{onSubmit:Y(j,["prevent"])},[e(ae,{title:o.$t("settings.company_info.company_info"),description:o.$t("settings.company_info.section_description")},{default:i(()=>[e(K,{class:"mt-5"},{default:i(()=>[e(g,{label:o.$t("settings.company_info.company_logo")},{default:i(()=>[e(V,{modelValue:s(b),"onUpdate:modelValue":a[0]||(a[0]=n=>oe(b)?b.value=n:b=n),base64:"",onChange:v,onRemove:$},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(K,{class:"mt-5"},{default:i(()=>[e(g,{label:o.$t("settings.company_info.company_name"),error:s(c).name.$error&&s(c).name.$errors[0].$message,required:""},{default:i(()=>[e(w,{modelValue:t.name,"onUpdate:modelValue":a[1]||(a[1]=n=>t.name=n),invalid:s(c).name.$error,onBlur:a[2]||(a[2]=n=>s(c).name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),e(g,{label:o.$t("settings.company_info.phone")},{default:i(()=>[e(w,{modelValue:t.address.phone,"onUpdate:modelValue":a[3]||(a[3]=n=>t.address.phone=n)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:o.$t("settings.company_info.country"),error:s(c).address.country_id.$error&&s(c).address.country_id.$errors[0].$message,required:""},{default:i(()=>[e(Z,{modelValue:t.address.country_id,"onUpdate:modelValue":a[4]||(a[4]=n=>t.address.country_id=n),label:"name",invalid:s(c).address.country_id.$error,options:s(f).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),e(g,{label:o.$t("settings.company_info.state")},{default:i(()=>[e(w,{modelValue:t.address.state,"onUpdate:modelValue":a[5]||(a[5]=n=>t.address.state=n),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:o.$t("settings.company_info.city")},{default:i(()=>[e(w,{modelValue:t.address.city,"onUpdate:modelValue":a[6]||(a[6]=n=>t.address.city=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:o.$t("settings.company_info.zip")},{default:i(()=>[e(w,{modelValue:t.address.zip,"onUpdate:modelValue":a[7]||(a[7]=n=>t.address.zip=n)},null,8,["modelValue"])]),_:1},8,["label"]),l("div",null,[e(g,{label:o.$t("settings.company_info.address")},{default:i(()=>[e(O,{modelValue:t.address.address_street_1,"onUpdate:modelValue":a[8]||(a[8]=n=>t.address.address_street_1=n),rows:"2"},null,8,["modelValue"])]),_:1},8,["label"]),e(O,{modelValue:t.address.address_street_2,"onUpdate:modelValue":a[9]||(a[9]=n=>t.address.address_street_2=n),rows:"2",row:2,class:"mt-2"},null,8,["modelValue"])]),l("div",$e,[e(g,{label:o.$t("settings.company_info.tax_id")},{default:i(()=>[e(w,{modelValue:t.tax_id,"onUpdate:modelValue":a[10]||(a[10]=n=>t.tax_id=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:o.$t("settings.company_info.vat_id")},{default:i(()=>[e(w,{modelValue:t.vat_id,"onUpdate:modelValue":a[11]||(a[11]=n=>t.vat_id=n),type:"text"},null,8,["modelValue"])]),_:1},8,["label"])])]),_:1}),e(te,{loading:s(m),disabled:s(m),type:"submit",class:"mt-6"},{left:i(n=>[s(m)?D("",!0):(h(),U(ee,{key:0,class:J(n.class),name:"SaveIcon"},null,8,["class"]))]),default:i(()=>[k(" "+p(o.$t("settings.company_info.save")),1)]),_:1},8,["loading","disabled"]),s(d).companies.length!==1?(h(),G("div",Be,[e(Q,{class:"my-4"}),l("h3",he,p(o.$t("settings.company_info.update_permissions")),1),l("div",Ce,[l("p",null,p(o.$t("settings.company_info.update_permissions_description")),1)]),l("div",Ve,[l("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm",onClick:z},p(o.$t("general.confirm_update")),1)])])):D("",!0),s(d).companies.length!==1?(h(),G("div",we,[e(Q,{class:"my-4"}),l("h3",xe,p(o.$t("settings.company_info.delete_company")),1),l("div",Ie,[l("p",null,p(o.$t("settings.company_info.delete_company_description")),1)]),l("div",Me,[l("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",onClick:N},p(o.$t("general.delete")),1)])])):D("",!0)]),_:1},8,["title","description"])],32),e(pe),e(be)],64)}}};export{De as default};
