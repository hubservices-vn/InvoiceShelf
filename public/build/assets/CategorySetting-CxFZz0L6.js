import{a7 as I,u as M,v as x,L as T,M as z,F as N,a5 as P,r as l,o as m,m as g,w as e,l as y,a as o,Q as v,p as w,t as B,K as k,f as j,k as F,c as L,J as V,b as S,N as A}from"./main-DuDaNFOP.js";import{u as E}from"./category-CZwZaTw7.js";import{_ as H}from"./CategoryModal-u5NaXQLO.js";const O={__name:"CategoryIndexDropdown",props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(p){const c=p,h=I();M();const{t}=x.useI18n(),i=E(),b=T(),_=z(),D=N();P("utils");function f(n){i.fetchCategory(n),D.openModal({title:t("settings.category.edit_category"),componentName:"CategoryModal",refreshData:c.loadData,size:"sm"})}function s(n){h.openDialog({title:t("general.are_you_sure"),message:t("settings.category.confirm_delete"),yesLabel:t("general.ok"),noLabel:t("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async()=>{if((await i.deleteCategory(n)).data.success)return c.loadData&&c.loadData(),!0;c.loadData&&c.loadData()})}return(n,a)=>{const r=l("BaseIcon"),d=l("BaseButton"),C=l("BaseDropdownItem"),u=l("BaseDropdown");return m(),g(u,null,{activator:e(()=>[y(b).name==="categorys.view"?(m(),g(d,{key:0,variant:"primary"},{default:e(()=>[o(r,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(m(),g(r,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:e(()=>[y(_).hasAbilities(y(v).EDIT_EXPENSE)?(m(),g(C,{key:0,onClick:a[0]||(a[0]=$=>f(p.row.id))},{default:e(()=>[o(r,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),w(" "+B(n.$t("general.edit")),1)]),_:1})):k("",!0),y(_).hasAbilities(y(v).DELETE_EXPENSE)?(m(),g(C,{key:1,onClick:a[1]||(a[1]=$=>s(p.row.id))},{default:e(()=>[o(r,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),w(" "+B(n.$t("general.delete")),1)]),_:1})):k("",!0)]),_:1})}}},X={class:"w-64"},J={class:"truncate"},U={__name:"CategorySetting",setup(p){const c=E();I();const h=N(),{t}=x.useI18n(),i=j(null),b=F(()=>[{key:"complete_name",label:t("settings.category.category_name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"type",label:t("settings.category.category_type"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"description",label:t("settings.category.category_description"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);async function _({page:s,filter:n,sort:a}){let r={orderByField:a.fieldName||"created_at",orderBy:a.order||"desc",page:s},d=await c.fetchCategories(r);return{data:d.data.data,pagination:{totalPages:d.data.meta.last_page,currentPage:s,totalCount:d.data.meta.total,limit:5}}}function D(){h.openModal({title:t("settings.category.add_category"),componentName:"CategoryModal",size:"sm",refreshData:f})}async function f(){i.value&&i.value.refresh()}return(s,n)=>{const a=l("BaseIcon"),r=l("BaseButton"),d=l("BaseTable"),C=l("BaseSettingCard");return m(),L(A,null,[o(H),o(C,{title:s.$t("settings.category.title"),description:s.$t("settings.category.description")},{action:e(()=>[o(r,{variant:"primary-outline",type:"button",onClick:D},{left:e(u=>[o(a,{class:V(u.class),name:"PlusIcon"},null,8,["class"])]),default:e(()=>[w(" "+B(s.$t("settings.category.add_new_category")),1)]),_:1})]),default:e(()=>[o(d,{ref_key:"table",ref:i,"sort-by":"complete_name","sort-order":"asc",data:_,columns:b.value,class:"mt-16"},{"cell-description":e(({row:u})=>[S("div",X,[S("p",J,B(u.data.description),1)])]),"cell-actions":e(({row:u})=>[o(O,{row:u.data,table:i.value,"load-data":f},null,8,["row","table"])]),_:1},8,["columns"])]),_:1},8,["title","description"])],64)}}};export{U as default};
