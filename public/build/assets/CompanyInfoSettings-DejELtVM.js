import{E as G,F as A,G as L,e as W,v as R,f as w,H as P,k,g as x,h as q,$ as X,j as T,r,o as I,m as D,w as i,b as o,t as p,l as s,q as Y,a as e,p as U,J as E,K as F,a4 as se,c as Q,n as oe,N as ne,I as le}from"./main-DmfySYkn.js";const ie={class:"flex justify-between w-full"},de={class:"px-6 pt-6"},re={class:"font-medium text-lg text-left"},ue={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},me={class:"p-4 sm:p-6 space-y-4"},ce={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},pe={__name:"DeleteCompanyModal",setup(J){const d=G(),f=A(),B=L(),_=W(),{t:M}=R.useI18n();let m=w(!1);const t=P({id:d.selectedCompany.id,name:null}),b=k(()=>f.active&&f.componentName==="DeleteCompanyModal"),y={formData:{name:{required:x.withMessage(M("validation.required"),q),sameAsName:x.withMessage(M("validation.company_name_not_same"),X(d.selectedCompany.name))}}},u=T(y,{formData:t},{$scope:!1});async function C(){if(u.value.$touch(),u.value.$invalid)return!0;const v=d.companies[0];m.value=!0;try{(await d.deleteCompany(t)).data.success&&(c(),await d.setSelectedCompany(v),_.push("/admin/dashboard"),await B.setIsAppLoaded(!1),await B.bootstrap()),m.value=!1}catch{m.value=!1}}function S(){t.id=null,t.name="",u.value.$reset()}function c(){f.closeModal(),setTimeout(()=>{S(),u.value.$reset()},300)}return(v,$)=>{const j=r("BaseInput"),z=r("BaseInputGroup"),N=r("BaseButton"),n=r("BaseIcon"),a=r("BaseModal");return I(),D(a,{show:b.value,onClose:c},{default:i(()=>[o("div",ie,[o("div",de,[o("h6",re,p(s(f).title),1),o("p",ue,p(v.$t("settings.company_info.delete_company_modal_desc",{company:s(d).selectedCompany.name})),1)])]),o("form",{action:"",onSubmit:Y(C,["prevent"])},[o("div",me,[e(z,{label:v.$t("settings.company_info.delete_company_modal_label",{company:s(d).selectedCompany.name}),error:s(u).formData.name.$error&&s(u).formData.name.$errors[0].$message,required:""},{default:i(()=>[e(j,{modelValue:t.name,"onUpdate:modelValue":$[0]||($[0]=V=>t.name=V),invalid:s(u).formData.name.$error,onInput:$[1]||($[1]=V=>s(u).formData.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),o("div",ce,[e(N,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:c},{default:i(()=>[U(p(v.$t("general.cancel")),1)]),_:1}),e(N,{loading:s(m),disabled:s(m),variant:"danger",type:"submit"},{left:i(V=>[s(m)?F("",!0):(I(),D(n,{key:0,name:"TrashIcon",class:E(V.class)},null,8,["class"]))]),default:i(()=>[U(" "+p(v.$t("general.delete")),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["show"])}}},_e={class:"flex justify-between w-full"},fe={class:"px-6 pt-6"},ye={class:"font-medium text-lg text-left"},ge={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},ve={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},be={__name:"UpdatePermissionModal",setup(J){const d=G(),f=A();L(),W();const{t:B}=R.useI18n();let _=w(!1);const M=P({id:d.selectedCompany.id,name:null}),m=k(()=>f.active&&f.componentName==="UpdatePermissionModal"),t={formData:{name:{required:x.withMessage(B("validation.required"),q),sameAsName:x.withMessage(B("validation.company_name_not_same"),X(d.selectedCompany.name))}}};T(t,{formData:M},{$scope:!1});async function b(){_.value=!0;try{(await d.updatePermissions({id:d.selectedCompany.id})).data.success&&y(),_.value=!1}catch{_.value=!1}}function y(){f.closeModal()}return(u,C)=>{const S=r("BaseButton"),c=r("BaseIcon"),v=r("BaseModal");return I(),D(v,{show:m.value,onClose:y},{default:i(()=>[o("div",_e,[o("div",fe,[o("h6",ye,p(s(f).title),1),o("p",ge,p(u.$t("settings.company_info.update_permissions_modal_desc",{company:s(d).selectedCompany.name})),1)])]),o("div",ve,[e(S,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:y},{default:i(()=>[U(p(u.$t("general.cancel")),1)]),_:1}),e(S,{loading:s(_),disabled:s(_),onClick:b,variant:"primary",type:"button"},{left:i($=>[s(_)?F("",!0):(I(),D(c,{key:0,name:"RefreshIcon",class:E($.class)},null,8,["class"]))]),default:i(()=>[U(" "+p(u.$t("general.update")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}},$e={class:"space-y-6"},Be={class:"py-5"},Ce={class:"text-lg leading-6 font-medium text-gray-900"},Ve={class:"mt-2 max-w-xl text-sm text-gray-500"},he={class:"mt-5"},we={key:0,class:"py-5"},xe={class:"text-lg leading-6 font-medium text-gray-900"},Ie={class:"mt-2 max-w-xl text-sm text-gray-500"},Me={class:"mt-5"},De={__name:"CompanyInfoSettings",setup(J){const d=G(),f=L(),B=A(),{t:_}=R.useI18n(),M=se("utils");let m=w(!1);const t=P({name:null,logo:null,tax_id:null,vat_id:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}});M.mergeSettings(t,{...d.selectedCompany});let b=w([]),y=w(null),u=w(null);const C=w(!1);t.logo&&b.value.push({image:t.logo});const S=k(()=>({name:{required:x.withMessage(_("validation.required"),q),minLength:x.withMessage(_("validation.name_min_length"),le(3))},address:{country_id:{required:x.withMessage(_("validation.required"),q)}}})),c=T(S,k(()=>t));f.fetchCountries();function v(n,a,V,g){u.value=g.name,y.value=a}function $(){y.value=null,C.value=!0}async function j(){if(c.value.$touch(),c.value.$invalid)return!0;if(m.value=!0,(await d.updateCompany(t)).data.data){if(y.value||C.value){let a=new FormData;y.value&&a.append("company_logo",JSON.stringify({name:u.value,data:y.value})),a.append("is_company_logo_removed",C.value),await d.updateCompanyLogo(a),y.value=null,C.value=!1}m.value=!1}m.value=!1}function z(n){B.openModal({title:_("settings.company_info.are_you_absolutely_sure"),componentName:"UpdatePermissionModal",size:"sm"})}function N(n){B.openModal({title:_("settings.company_info.are_you_absolutely_sure"),componentName:"DeleteCompanyModal",size:"sm"})}return(n,a)=>{const V=r("BaseFileUploader"),g=r("BaseInputGroup"),H=r("BaseInputGrid"),h=r("BaseInput"),Z=r("BaseMultiselect"),K=r("BaseTextarea"),ee=r("BaseIcon"),te=r("BaseButton"),O=r("BaseDivider"),ae=r("BaseSettingCard");return I(),Q(ne,null,[o("form",{onSubmit:Y(j,["prevent"])},[e(ae,{title:n.$t("settings.company_info.company_info"),description:n.$t("settings.company_info.section_description")},{default:i(()=>[e(H,{class:"mt-5"},{default:i(()=>[e(g,{label:n.$t("settings.company_info.company_logo")},{default:i(()=>[e(V,{modelValue:s(b),"onUpdate:modelValue":a[0]||(a[0]=l=>oe(b)?b.value=l:b=l),base64:"",onChange:v,onRemove:$},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(H,{class:"mt-5"},{default:i(()=>[e(g,{label:n.$t("settings.company_info.company_name"),error:s(c).name.$error&&s(c).name.$errors[0].$message,required:""},{default:i(()=>[e(h,{modelValue:t.name,"onUpdate:modelValue":a[1]||(a[1]=l=>t.name=l),invalid:s(c).name.$error,onBlur:a[2]||(a[2]=l=>s(c).name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),e(g,{label:n.$t("settings.company_info.phone")},{default:i(()=>[e(h,{modelValue:t.address.phone,"onUpdate:modelValue":a[3]||(a[3]=l=>t.address.phone=l)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:n.$t("settings.company_info.country"),error:s(c).address.country_id.$error&&s(c).address.country_id.$errors[0].$message,required:""},{default:i(()=>[e(Z,{modelValue:t.address.country_id,"onUpdate:modelValue":a[4]||(a[4]=l=>t.address.country_id=l),label:"name",invalid:s(c).address.country_id.$error,options:s(f).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),e(g,{label:n.$t("settings.company_info.state")},{default:i(()=>[e(h,{modelValue:t.address.state,"onUpdate:modelValue":a[5]||(a[5]=l=>t.address.state=l),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:n.$t("settings.company_info.city")},{default:i(()=>[e(h,{modelValue:t.address.city,"onUpdate:modelValue":a[6]||(a[6]=l=>t.address.city=l),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:n.$t("settings.company_info.zip")},{default:i(()=>[e(h,{modelValue:t.address.zip,"onUpdate:modelValue":a[7]||(a[7]=l=>t.address.zip=l)},null,8,["modelValue"])]),_:1},8,["label"]),o("div",null,[e(g,{label:n.$t("settings.company_info.address")},{default:i(()=>[e(K,{modelValue:t.address.address_street_1,"onUpdate:modelValue":a[8]||(a[8]=l=>t.address.address_street_1=l),rows:"2"},null,8,["modelValue"])]),_:1},8,["label"]),e(K,{modelValue:t.address.address_street_2,"onUpdate:modelValue":a[9]||(a[9]=l=>t.address.address_street_2=l),rows:"2",row:2,class:"mt-2"},null,8,["modelValue"])]),o("div",$e,[e(g,{label:n.$t("settings.company_info.tax_id")},{default:i(()=>[e(h,{modelValue:t.tax_id,"onUpdate:modelValue":a[10]||(a[10]=l=>t.tax_id=l),type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),e(g,{label:n.$t("settings.company_info.vat_id")},{default:i(()=>[e(h,{modelValue:t.vat_id,"onUpdate:modelValue":a[11]||(a[11]=l=>t.vat_id=l),type:"text"},null,8,["modelValue"])]),_:1},8,["label"])])]),_:1}),e(te,{loading:s(m),disabled:s(m),type:"submit",class:"mt-6"},{left:i(l=>[s(m)?F("",!0):(I(),D(ee,{key:0,class:E(l.class),name:"SaveIcon"},null,8,["class"]))]),default:i(()=>[U(" "+p(n.$t("settings.company_info.save")),1)]),_:1},8,["loading","disabled"]),o("div",Be,[e(O,{class:"my-4"}),o("h3",Ce,p(n.$t("settings.company_info.update_permissions")),1),o("div",Ve,[o("p",null,p(n.$t("settings.company_info.update_permissions_description")),1)]),o("div",he,[o("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:text-sm",onClick:z},p(n.$t("general.confirm_update")),1)])]),s(d).companies.length!==1?(I(),Q("div",we,[e(O,{class:"my-4"}),o("h3",xe,p(n.$t("settings.company_info.delete_company")),1),o("div",Ie,[o("p",null,p(n.$t("settings.company_info.delete_company_description")),1)]),o("div",Me,[o("button",{type:"button",class:"inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm",onClick:N},p(n.$t("general.delete")),1)])])):F("",!0)]),_:1},8,["title","description"])],32),e(pe),e(be)],64)}}};export{De as default};
